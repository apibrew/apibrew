type: resource
name: Person
properties:
  firstName:
    type: STRING
    required: true
  lastName:
    type: STRING
    required: true
  age:
    type: INT32
  age_group:
    type: INT32
---
type: nano/Code
name: PersonLogic.js
language: JAVASCRIPT
content: |
  const Person = resource('Person')
  
  Person.age_group.compute(person => {
    return (person.age - (person.age % 10)) / 10
  }, [Person.age])
---
type: testing/TestSuite
name: test-suite-1
description: Test Suite 1
---
type: testing/TestCase
name: test-case-1
description: Test Case 1
testSuite:
  name: test-suite-1
steps:
  - name: createPerson1
    operation: CREATE
    payload:
      type: Person
      firstName: John
      lastName: Doe
      age: 20
  - name: createPerson2
    operation: CREATE
    payload:
      type: Person
      firstName: John
      lastName: Doe
      age: 25
  - name: createPerson3
    operation: CREATE
    payload:
      type: Person
      firstName: John
      lastName: Doe
      age: 76
assertions:
  - name: checkPerson1Age
    assertionType: EQUAL
    left: $createPerson1_result.age
    right: 20
  - name: checkPersonAge1Group
    assertionType: EQUAL
    left: $createPerson1_result.age_group
    right: 2
  - name: checkPersonAge2Group
    assertionType: EQUAL
    left: $createPerson2_result.age_group
    right: 2
  - name: checkPersonAge3Group
    assertionType: EQUAL
    left: $createPerson3_result.age_group
    right: 7
---
type: testing/TestExecution
name: test-execution-1
stored: false
testCase:
  name: test-case-1
  testSuite:
    name: test-suite-1

