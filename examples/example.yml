type: resource
name: country2
sourceConfig:
  dataSource: default
  entity: country2
version: 1
properties:
  - name: name
    type: STRING
    length: 255
    required: true
    unique: true
  - name: description
    type: STRING
    length: 255
---
type: record
resource: country2
properties:
  name: Azerbaijan
  description: Land of fire
---
type: resource
name: city
sourceConfig:
  dataSource: default
  entity: city
properties:
  - name: name
    type: STRING
    length: 255
    required: true
    unique: true
  - name: description
    type: STRING
    length: 255
  - name: country
    type: REFERENCE
    reference:
      resource: country2
      cascade: true
extension:
  - step: BEFORE
    action: CREATE_UPDATE
    execution:
      script:
        language: nodejs
        code: |
          record.description = record.title + "test"
  - step: BEFORE
    action: CREATE_UPDATE
    execution:
      script:
        language: nodejs
        file: ./test.js
---
type: record
resource: country2
properties:
  name: Azerbaijan
  description: Land of fire
---
type: record
resource: city
properties:
  name: Baku
  country:
    name: Azerbaijan